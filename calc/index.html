<!DOCTYPE html><html lang='ru'><head><meta charset='utf-8'><meta name='viewport' content='width=device-width,initial-scale=1'>
<title>ZEUS AI — Калькулятор</title>
<style>
:root{--b:#071226;--p:#0b1836;--p2:#0a1532;--t:#eaf4ff;--m:#a9c2ff;--bd:#39e9ff33}*{box-sizing:border-box}
body{margin:0;background:linear-gradient(180deg,#10275b,#071226);color:var(--t);font-family:Inter,system-ui}
.wrap{max-width:1200px;margin:0 auto;padding:22px 14px 40px}.hdr{display:flex;justify-content:space-between;gap:10px;align-items:center}
.badge{border:1px solid var(--bd);padding:6px 10px;border-radius:999px;background:linear-gradient(180deg,#0f2a63,#0b1c41)}
.menu{display:flex;gap:8px;flex-wrap:wrap}.btn{background:#102a64;border:1px solid var(--bd);color:#fff;border-radius:12px;padding:8px 12px;cursor:pointer}
.grid{display:grid;grid-template-columns:1.05fr .95fr;gap:16px}@media(max-width:980px){.grid{grid-template-columns:1fr}}
.card{background:linear-gradient(180deg,var(--p),var(--p2));border:1px solid var(--bd);border-radius:16px;padding:14px}
.ttl{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.pill{border:1px solid var(--bd);padding:3px 8px;border-radius:12px;color:#bfeaff;font-size:12px}
.row{display:grid;gap:10px}.two{grid-template-columns:repeat(2,minmax(160px,1fr))}label{display:flex;flex-direction:column;gap:6px;font-size:13px;color:var(--m)}
input,select{background:#0a1432;border:1px solid var(--bd);color:#fff;border-radius:10px;padding:10px 12px}
.kpis{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:8px}.kpi{background:rgba(255,255,255,.04);border:1px solid var(--bd);border-radius:12px;padding:10px}
.k{font-size:12px;color:#a9c2ff}.v{font-weight:700}
.canv{background:linear-gradient(180deg,#0a1840,#091537);border:1px solid var(--bd);border-radius:14px;padding:10px}
canvas{width:100%;height:360px;display:block}
.i{display:inline-flex;align-items:center;justify-content:center;width:16px;height:16px;margin-left:6px;border-radius:50%;border:1px solid var(--bd);color:#9bdfff;font-size:12px;cursor:help;position:relative}
.i:hover::after{content:attr(data-tip);position:absolute;left:20px;top:-4px;min-width:220px;max-width:360px;background:#0a1840;color:#cfeaff;border:1px solid var(--bd);padding:8px 10px;border-radius:10px;white-space:normal;z-index:10}
.tabs{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0}.tab{padding:8px 12px;border:1px solid var(--bd);border-radius:999px;background:#0a1840;color:#bfeaff;cursor:pointer}.tab.active{background:#12305e;color:#fff}
.legend{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0}.chip{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--bd);border-radius:999px;padding:6px 10px;background:#0a1840}.dot{width:10px;height:10px;border-radius:50%}
.table{margin-top:8px;border:1px solid var(--bd);border-radius:12px;overflow:hidden}thead th{background:#0a1840;color:#bfeaff}th,td{padding:10px 12px;border-bottom:1px dashed #27406e}
</style></head><body>
<div class='wrap'>
  <div class='hdr'>
    <div style='display:flex;gap:10px;align-items:center'><div class='badge'>ZEUS&nbsp;AI</div><h1 style='margin:0;color:#98e9ff;font-size:22px'>Калькулятор сложных процентов</h1></div>
    <div class='menu'><button class='btn' id='btnReset'>Сброс</button><button class='btn' id='btnShare'>Поделиться</button><button class='btn' id='btnPNG'>PNG</button><button class='btn' id='btnPDF'>PDF</button><button class='btn' id='btnCSV'>CSV</button></div>
  </div>

  <div class='grid'>
    <div class='card'>
      <div class='ttl'><h3>Параметры</h3><span class='pill'>ввод</span></div>
      <div class='row two'>
        <label>Годовая ставка, % <span class='i' data-tip='Номинальная годовая ставка (APR). Комиссия вычитается ниже.'>i</span><input id='rate' type='number' value='24' step='0.01'></label>
        <label>Комиссия, % <span class='i' data-tip='Годовые издержки: вычитаются из ставки перед начислением.'>i</span><input id='fee' type='number' value='0' step='0.01'></label>
      </div>
      <div class='row two'>
        <label>Первоначальная сумма <span class='i' data-tip='Стартовый депозит. ≥ $3,000 — включается собственный доход 50% от процентов.'>i</span><input id='initial' type='number' value='3000'></label>
        <label>Регулярное пополнение <span class='i' data-tip='Сумма взноса за период (см. частоту).'>i</span><input id='contrib' type='number' value='0'></label>
      </div>
      <div class='row two'>
        <label>Частота пополнений <span class='i' data-tip='Раз в год: 1/4/12. 0 — без пополнений.'>i</span><select id='contribFreq'><option value='12'>Ежемесячно (12)</option><option value='4'>Ежеквартально (4)</option><option value='1'>Ежегодно (1)</option><option value='0' selected>Без пополнений</option></select></label>
        <label>Капитализация <span class='i' data-tip='Сколько раз в год начисляются проценты.'>i</span><select id='compound'><option value='12'>Ежемесячно (12)</option><option value='4'>Ежеквартально (4)</option><option value='1' selected>Ежегодно (1)</option></select></label>
      </div>
      <div class='row two'>
        <label>Срок, лет <span class='i' data-tip='Горизонт моделирования.'>i</span><input id='years' type='number' value='3'></label>
        <label>Инфляция, % <span class='i' data-tip='Для колонки «Реально (с инфл.)».'>i</span><input id='infl' type='number' value='0'></label>
      </div>
      <div class='row two'>
        <label>Момент пополнения <span class='i' data-tip='«В начале» — взнос сразу в работе; «В конце» — со следующего периода.'>i</span><select id='timing'><option value='begin' selected>В начале периода</option><option value='end'>В конце периода</option></select></label>
        <label>Валюта <span class='i' data-tip='Символ для отображения.'>i</span><select id='currency'><option value='$' selected>$</option><option value='€'>€</option><option value='₽'>₽</option></select></label>
      </div>
      <div class='kpis'><div class='kpi'><div class='k'>Внесено, всего</div><div class='v' id='tcontrib'>—</div></div><div class='kpi'><div class='k'>Начислено процентов</div><div class='v' id='tinterest'>—</div></div><div class='kpi'><div class='k'>EAR (эффективная)</div><div class='v' id='earVal'>—</div></div></div>
    </div>

    <div class='card'>
      <div class='ttl'><h3>Результаты</h3><span class='pill'>график + таблица</span></div>
      <div class='canv'><canvas id='chart'></canvas></div>
      <div class='table'><table><thead><tr><th>Год</th><th>Баланс</th><th>Реально (с инфл.)</th></tr></thead><tbody id='tbody'></tbody></table></div>
    </div>
  </div>

  <div class='card' style='margin-top:16px'>
    <div class='ttl'><h3>Партнёрская программа</h3><span class='pill'>копитрейдинг</span></div>
    <div class='row two'>
      <label><span>Учитывать партнёрку <span class='i' data-tip='Выключите, чтобы считать только свой депозит.'>i</span></span><input id='affOn' type='checkbox' checked></label>
      <label>Средняя прибыль партнёра / месяц <span class='i' data-tip='Средняя чистая прибыль одного инвестора в месяц.'>i</span><input id='affAvg' type='number' value='200'></label>
    </div>
    <div class='row two'>
      <label>Месяцев учёта <span class='i' data-tip='На сколько месяцев суммировать партнёрский доход.'>i</span><input id='affMonths' type='number' value='48'></label>
      <span class='i' data-tip='Ставки уровней: L1 5%, L2 8%, L3 10%, L4 2%. Собственный доход: 50% от процентов при депозите ≥ $3,000.'>ⓘ</span>
    </div>
    <div class='row two'>
      <label>L1 — личные <span class='i' data-tip='Ваши прямые подключения (5%).'>i</span><input id='affL1' type='number' value='20'></label>
      <label>L2 — рефералы L1 <span class='i' data-tip='Партнёры, приглашённые L1 (8%).'>i</span><input id='affL2' type='number' value='50'></label>
    </div>
    <div class='row two'>
      <label>L3 — рефералы L2 <span class='i' data-tip='Партнёры третьего уровня (10%).'>i</span><input id='affL3' type='number' value='100'></label>
      <label>L4 — глубина <span class='i' data-tip='Партнёры четвёртого уровня (2%).'>i</span><input id='affL4' type='number' value='300'></label>
    </div>

    <div class='tabs'><div class='tab active' data-view='all'>Все уровни</div><div class='tab' data-view='l1'>L1</div><div class='tab' data-view='l2'>L2</div><div class='tab' data-view='l3'>L3</div><div class='tab' data-view='l4'>L4</div><div class='tab' data-view='own'>Собственный</div></div>
    <div class='legend'><div class='chip'><span class='dot' style='background:#6ec1ff'></span> Месяц</div><div class='chip'><span class='dot' style='background:#ff8ea1'></span> 1 год</div><div class='chip'><span class='dot' style='background:#8effa4'></span> 2 года</div><div class='chip'><span class='dot' style='background:#f8d47b'></span> 3 года</div></div>
    <div class='canv'><canvas id='affChart'></canvas></div>
    <div class='kpis'><div class='kpi'><div class='k'>Собственный доход (50% процентов)</div><div class='v' id='ownShare'>—</div></div><div class='kpi'><div class='k'>Партнёрский доход за период</div><div class='v' id='affTotal'>—</div></div><div class='kpi'><div class='k'>Итого: собственный + партнёрский</div><div class='v' id='grandTotal'>—</div></div></div>
    <div class='note' id='affPerMonth'>В среднем в месяц: —</div>
  </div>
</div>

<script>
(function(g){function L(ctx,labels,colors,x,y){ctx.font='12px Inter,Arial';ctx.textBaseline='middle';let off=0;labels.forEach((lab,i)=>{const c=colors[i%colors.length];ctx.fillStyle=c;ctx.fillRect(x+off,y-6,12,12);ctx.fillStyle='#cfeaff';ctx.fillText(lab,x+off+16,y);off+=ctx.measureText(lab).width+36;});}
function scl(a){let mn=Math.min(...a),mx=Math.max(...a);if(!isFinite(mn)||!isFinite(mx)){mn=0;mx=1;}if(mn===mx)mx=mn+1;return{mn,mx}}
class Chart{constructor(ctx,cfg){this.ctx=ctx;this.cfg=JSON.parse(JSON.stringify(cfg||{}));this._d=false;this.draw();}destroy(){this._d=true;this.ctx=null;this.cfg=null;}update(){this.draw();}
draw(){if(this._d)return;const c=this.ctx.canvas,ctx=this.ctx,dpr=window.devicePixelRatio||1;c.width=c.clientWidth*dpr;c.height=c.clientHeight*dpr;ctx.setTransform(dpr,0,0,dpr,0,0);ctx.clearRect(0,0,c.clientWidth,c.clientHeight);
const P={l:60,r:24,t:36,b:34},W=c.clientWidth,H=c.clientHeight,AW=W-P.l-P.r,AH=H-P.t-P.b;const labels=(this.cfg.data&&this.cfg.data.labels)||[],ds=(this.cfg.data&&this.cfg.data.datasets)||[];
ctx.strokeStyle='rgba(160,200,255,.25)';ctx.lineWidth=1;ctx.beginPath();ctx.moveTo(P.l,P.t);ctx.lineTo(P.l,H-P.b);ctx.lineTo(W-P.r,H-P.b);ctx.stroke();
const all=[];ds.forEach(s=>(s.data||[]).forEach(v=>{if(isFinite(v))all.push(v);}));const ys=scl(all.length?all:[0,1]);const y0=Math.min(0,ys.mn),y1=ys.mx*1.15;
const xp=i=>(labels.length<=1)? P.l+AW*0.05+i*30 : P.l + (i/(labels.length-1))*AW;const yp=v=> (H-P.b) - ((v-y0)/Math.max(1e-9,(y1-y0)))*AH;
ctx.fillStyle='#9fb7ff';ctx.font='12px Inter,Arial';for(let t=0;t<=6;t++){const v=y0+(y1-y0)*t/6,y=yp(v);ctx.strokeStyle='rgba(160,200,255,.12)';ctx.beginPath();ctx.moveTo(P.l,y);ctx.lineTo(W-P.r,y);ctx.stroke();ctx.fillText(v.toLocaleString(undefined,{maximumFractionDigits:0}),10,y);}
const pal=['#6ec1ff','#ff8ea1','#8effa4','#f8d47b','#caa0ff','#73e3e8'];const gW=(labels.length?AW/labels.length:50);
ds.forEach((s,di)=>{const col=s.color||pal[di%pal.length];if((this.cfg.type||'line')==='line'){ctx.strokeStyle=col;ctx.lineWidth=2.2;ctx.beginPath();(s.data||[]).forEach((v,i)=>{const x=xp(i),y=yp(v);if(i===0)ctx.moveTo(x,y);else ctx.lineTo(x,y);});ctx.stroke();if(s.fill){const base=yp(0);ctx.lineTo(xp((s.data||[]).length-1),base);ctx.lineTo(xp(0),base);ctx.closePath();ctx.fillStyle=col+'33';ctx.fill();}}
else if(this.cfg.type==='bar'){const k=Math.max(1,ds.length),bw=gW*0.66/k,sh=(k*bw)/2;(s.data||[]).forEach((v,i)=>{const cx=xp(i),x=cx-sh+di*bw+2,y=yp(v),base=yp(0);ctx.fillStyle=col;const h=Math.abs(base-y),yy=Math.min(y,base),r=Math.min(8,h/2);
ctx.beginPath();ctx.moveTo(x,yy+h);ctx.lineTo(x,yy+r);ctx.quadraticCurveTo(x,yy,x+r,yy);ctx.lineTo(x+bw-r,yy);ctx.quadraticCurveTo(x+bw,yy,x+bw,yy+r);ctx.lineTo(x+bw,yy+h);ctx.closePath();ctx.fill();
if(s.showValues){ctx.fillStyle='#d7eaff';ctx.font='11px Inter,Arial';ctx.textAlign='center';ctx.fillText(((v||0)).toLocaleString(undefined,{maximumFractionDigits:0}),x+bw/2,yy-6);}});} });L(ctx,ds.map(x=>x.label||''),pal,P.l,16);}}
g.Chart=Chart;})(this);
</script>

<script>
const i=id=>document.getElementById(id);const $=s=>document.querySelector(s);
function lcm(a,b){const g=(x,y)=>y===0?x:g(y,x%y);return a*b/g(a,b)}function fmt(sym,n){return sym+' '+(+n).toLocaleString(undefined,{maximumFractionDigits:2})}
let chart=null,affChart=null,view='all';
function getParams(){return{rate:+i('rate').value||0,fee:+i('fee').value||0,initial:+i('initial').value||0,contrib:+i('contrib').value||0,contribFreq:+i('contribFreq').value||0,compound:+i('compound').value||0,years:+i('years').value||0,infl:+i('infl').value||0,timing:i('timing').value,currency:i('currency').value,affOn:i('affOn').checked,affAvg:+i('affAvg').value||0,affMonths:+i('affMonths').value||0,affL1:+i('affL1').value||0,affL2:+i('affL2').value||0,affL3:+i('affL3').value||0,affL4:+i('affL4').value||0};}
function simulate(p){const n=Math.max(1,Math.floor(p.compound)),m=Math.max(0,Math.floor(p.contribFreq));const steps=(m===0?n:lcm(n,m)),ce=steps/n,me=(m===0?Infinity:steps/m);const r=(p.rate-p.fee)/100;let b=+p.initial||0,tc=0,inv=+p.initial||0;const yearly=[],invY=[];
for(let y=1;y<=p.years;y++){for(let s=1;s<=steps;s++){if(p.timing==='begin'&&((s-1)%me===0)&&p.contrib>0){b+=+p.contrib;tc+=+p.contrib;inv+=+p.contrib;}if(s%ce===0){b*=1+(r/n);}if(p.timing==='end'&&(s%me===0)&&p.contrib>0){b+=+p.contrib;tc+=+p.contrib;inv+=+p.contrib;}}const real=p.infl>0? b/Math.pow(1+p.infl/100,y):b;yearly.push({year:y,balance:b,real:+real.toFixed(2)});invY.push(inv);}const ear=Math.pow(1+(r/n),n)-1;return{final:b,interest:b-(+p.initial+tc),yearly,investedYearly:invY,ear};}
function render(){const p=getParams(),r=simulate(p);const contrib=(p.contribFreq>0?p.years*p.contribFreq:0)*p.contrib;i('tcontrib').textContent=fmt(p.currency,contrib);i('tinterest').textContent=fmt(p.currency,r.interest);i('earVal').textContent=(r.ear*100).toFixed(2)+'%';
const tb=i('tbody');tb.innerHTML='';r.yearly.forEach(y=>{const tr=document.createElement('tr');tr.innerHTML=`<td>${y.year}</td><td style='text-align:right'>${fmt(p.currency,y.balance)}</td><td style='text-align:right'>${fmt(p.currency,y.real)}</td>`;tb.appendChild(tr);});
const ctx=i('chart').getContext('2d'); if(chart) chart.destroy(); chart=new Chart(ctx,{type:'line',data:{labels:r.yearly.map(y=>y.year),datasets:[{label:'Внесено',data:r.investedYearly,fill:true,color:'#6ec1ff'},{label:'Итог',data:r.yearly.map(y=>y.balance),fill:false,color:'#f8d47b'}]}});
const L=[p.affL1,p.affL2,p.affL3,p.affL4],R=[0.05,0.08,0.10,0.02],avg=Math.max(0,p.affAvg);const mon=L.map((n,k)=>p.affOn?avg*(R[k]*n):0);
const own=(p.initial>=3000)? Math.max(0,r.interest*0.5):0; const aff=p.affOn? p.affMonths*(mon[0]+mon[1]+mon[2]+mon[3]):0; const grand=own+aff;
i('ownShare').textContent=fmt(p.currency,own); i('affTotal').textContent=fmt(p.currency,aff); i('grandTotal').textContent=fmt(p.currency,grand); i('affPerMonth').textContent='В среднем в месяц: '+fmt(p.currency,grand/Math.max(1,p.affMonths));
const ac=i('affChart').getContext('2d'); if(affChart) affChart.destroy(); function ds(v){return[{label:'Месяц',data:v,color:'#6ec1ff',showValues:true},{label:'1 год',data:v.map(x=>x*12),color:'#ff8ea1',showValues:true},{label:'2 года',data:v.map(x=>x*24),color:'#8effa4',showValues:true},{label:'3 года',data:v.map(x=>x*36),color:'#f8d47b',showValues:true}];}
let data; if(view==='all'){data={labels:['L1','L2','L3','L4'],datasets:ds(mon)};} else if(view==='own'){const m=own/Math.max(1,p.affMonths);data={labels:['Own'],datasets:ds([m])};} else {const map={l1:0,l2:1,l3:2,l4:3};const idx=map[view];data={labels:[view.toUpperCase()],datasets:ds([mon[idx]])};}
affChart=new Chart(ac,{type:'bar',data});}
function setTab(v){view=v;document.querySelectorAll('.tab').forEach(t=>t.classList.toggle('active',t.dataset.view===v));render();}
function bind(){['rate','fee','initial','contrib','contribFreq','compound','years','infl','timing','currency','affOn','affAvg','affMonths','affL1','affL2','affL3','affL4'].forEach(id=>{const el=i(id);if(el){el.addEventListener('input',render);el.addEventListener('change',render);}});
document.querySelectorAll('.tab').forEach(t=>t.addEventListener('click',()=>setTab(t.dataset.view))); i('btnReset').addEventListener('click',()=>location.href=location.pathname);
i('btnShare').addEventListener('click',()=>{const u=new URL(location.href.split('?')[0]);Object.entries(getParams()).forEach(([k,v])=>u.searchParams.set(k,String(v)));history.replaceState(null,'',u.toString());navigator.clipboard&&navigator.clipboard.writeText(u.toString());alert('Ссылка скопирована');});
i('btnPNG').addEventListener('click',()=>{const a=document.createElement('a');a.href=document.querySelector('#affChart').toDataURL('image/png');a.download='partner_chart.png';a.click();});
i('btnPDF').addEventListener('click',()=>window.print());
i('btnCSV').addEventListener('click',()=>{const p=getParams();const r=simulate(p);const rows=[['Год','Баланс','Реально (с инфл.)']];r.yearly.forEach(y=>rows.push([y.year,y.balance,y.real]));const L=[p.affL1,p.affL2,p.affL3,p.affL4],R=[0.05,0.08,0.10,0.02],avg=Math.max(0,p.affAvg);const mon=L.map((n,i)=>p.affOn?avg*(R[i]*n):0);rows.push([]);rows.push(['L','Месяц','1 год','2 года','3 года']);[['L1',0],['L2',1],['L3',2],['L4',3]].forEach(([k,idx])=>rows.push([k,mon[idx],mon[idx]*12,mon[idx]*24,mon[idx]*36]));const csv=rows.map(r=>r.map(v=>`"${String(v).replace(/"/g,'""')}"`).join(',')).join('\n');const a=document.createElement('a');a.href='data:text/csv;charset=utf-8,'+encodeURIComponent(csv);a.download='zeus_calc.csv';a.click();});}
bind();render();
</script>
</body></html>
